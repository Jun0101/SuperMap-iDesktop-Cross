---
title: 生成距离栅格
---

　　生成距离栅格用来计算每个单元格到最近源（源是我们感兴趣的地物、对象，如水井、道路或学校）的距离，并使用此距离值给栅格像元赋值，生成距离数据集。同时根据像元到最近源的方向生成方向数据集；根据最近源的选择可以确定每个源覆盖的服务范围，从而生成分配数据集。

　　生成距离栅格时，可以指定耗费数据，得到耗费距离栅格。耗费距离栅格分析的源数据可以是矢量数据（点、线、面），也可以是栅格数据。与直线距离栅格分析结果类似，耗费距离栅格分析的结果包含：耗费距离栅格数据集、耗费方向栅格数据集、耗费分配栅格数据集三个数据集；其中耗费距离栅格得到的是每个单元格到最近的源的最小累积耗费值，这包含了两层意义，一是分配给每个像元的源的依据是从该像元到所有的源中耗费最小的一个；另外，像元值是该单元格到该源的多条路径中的最小累积耗费。耗费数据是可选参数，可以不设置，则会得到直线距离栅格结果。

　　生成距离栅格功能用来计算栅格数据的每个像元与源数据的距离。获得的结果可以用来解决三个问题：

 - 栅格数据中每个像元到最近源数据的距离，例如到最近学校的距离。 
 - 栅格数据中每个像元到最近源数据的方向，例如到最近学校的方向。 
 - 根据资源的空间分布，要分配给源数据的像元，例如最近的几个学校位置。 

　　生成距离栅格会得到三种数据集，即距离栅格、方向栅格和分配栅格。如下图所示，分别展示了这三种栅格

 ![](img/CreateDis.png)  


### 操作说明

1. 计算距离栅格的功能入口有以下两个：
 - 在“空间分析”选项卡的“栅格分析”组中，单击“距离栅格”下拉按钮，选择“生成距离栅格”选项。
  - 在工具箱的“栅格分析”-“距离栅格”选项中，双击“生成距离栅格”选项，或将该选项拖入可视化建模的画布中。

2. 源数据设置：在该对话框中，设置源数据的数据源，并选择存放源数据的数据集。源数据中是我们感兴趣的地物或者对象，如水井、道路或学校等，可以是矢量数据，也可以是栅格数据。 
3. **耗费数据**：设置存放耗费数据的数据源。并选择该数据源中的耗费栅格数据集，栅格数据集支持空数据集，但栅格数据集不能存在负值，否则程序会提出警告“耗费栅格中不能存在负值！”。 耗费数据集给定每个像元的耗费成本，可以是高度、坡度等，例如翻越一座山到达目的地的路程可能较短，但是绕行它的时间则可能要短一些。
4. 参数设置：设置距离栅格参数,包括最大距离和分辨率。 
 - **最大距离**：用来设置生成的距离栅格的最大距离，大于该距离的栅格则在结果数据集中取无值。默认值为0，表示结果不受距离限制。该参数可选。
 - **分辨率**：设置结果数据集的分辨率。默认值使用源数据集范围对应矩形对角线长度的500分之一。该参数可选。

5. 设置结果数据：选择结果数据要保存的数据源，距离栅格数据、方向栅格数据和分配栅格数据结果名称。默认生成的距离数据集名称为 DistanceGird，方向数据集为 DirectionGrid，分配数据集为 AllocationGrid。
6. 单击“执行”按钮，执行生成距离栅格的操作。


### 相关主题  
 
　　![](../img/smalltitle.png) [距离栅格概述](AboutRasterDistance.html)  

　　![](../img/smalltitle.png) [计算最短路径](ShortPath.html) 
   
　　![](../img/smalltitle.png) [两点最短地表路径](TwoPointDis.html) 
   
　　![](../img/smalltitle.png) [两点最短耗费路径](TwoPointCostDis.html)    
 



